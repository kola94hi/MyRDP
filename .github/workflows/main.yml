name: RDP Simple

on:
  workflow_dispatch:

jobs:
  secure-rdp:
    runs-on: windows-latest
    timeout-minutes: 10

    steps:
      # ... (todos los pasos anteriores excepto Start Auto-Restart Job)
      
      - name: Keep Alive for 10 Minutes
        run: |
          Write-Host "RDP disponible por 10 minutos..."
          $startTime = Get-Date
          $duration = 10 * 60  # 10 minutos
          
          while ($true) {
              $elapsed = (Get-Date) - $startTime
              if ($elapsed.TotalSeconds -ge $duration) {
                  Write-Host "Tiempo completado"
                  break
              }
              $remaining = $duration - $elapsed.TotalSeconds
              Write-Host "Tiempo restante: $([math]::Round($remaining))s"
              Start-Sleep -Seconds 30
          }
